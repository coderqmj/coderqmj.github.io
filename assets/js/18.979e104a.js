(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{493:function(t,s,v){t.exports=v.p+"assets/img/vite1.121e1bc6.png"},494:function(t,s,v){t.exports=v.p+"assets/img/viteless1.7ad914d6.png"},495:function(t,s,v){t.exports=v.p+"assets/img/viteless2.76de1eab.png"},667:function(t,s,v){"use strict";v.r(s);var e=v(44),a=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"一、认识vite"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、认识vite"}},[t._v("#")]),t._v(" 一、认识Vite")]),t._v(" "),e("ul",[e("li",[t._v("官方定义："),e("strong",[t._v("下一代前端开发与构建工具")])]),t._v(" "),e("li",[t._v("如何理解下一代开发和构建工具\n"),e("ul",[e("li",[t._v("在实际开发中，编写的代码往往无法被浏览器识别，ES6、TS、VUE等")]),t._v(" "),e("li",[t._v("所以必须通过构建工具来对代码进行转换、编译，类似工具有webpack")]),t._v(" "),e("li",[t._v("随着项目越来越大，处理的JS越来越多，模块越来越多")]),t._v(" "),e("li",[t._v("构建工具需要很长时间才能开启服务，HMR也需要几秒钟的时间才能在浏览器上反映出来")]),t._v(" "),e("li",[t._v("总之一句话："),e("strong",[t._v("天下苦webpack久已")])])])]),t._v(" "),e("li",[t._v("我的理解：\n"),e("ul",[e("li",[t._v("一些新的浏览器是支持ES模块化的，那我们开发阶段就不需要去构建，节省我们开发时的成本，等到要上线的时候再去适配低版本浏览器的用户。")]),t._v(" "),e("li",[t._v("但是现在还是不支持ts，vue之类的，还是需要构建的，那么vite就是帮助我们去做这些事情，帮助把这些文件编译成ES模块化的，到时候请求使用.ts.vue文件都会转发ES模块化的文件给到浏览器")])])])]),t._v(" "),e("h2",{attrs:{id:"二、vite的构造"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、vite的构造"}},[t._v("#")]),t._v(" 二、Vite的构造")]),t._v(" "),e("ul",[e("li",[t._v("两部分构成：\n"),e("ul",[e("li",[t._v("一个开发服务器，它基于原生ES模块提供了丰富的内建功能，HMR的速度非常快")]),t._v(" "),e("li",[t._v("一套构建指令，使用Rollup打开我们的代码，并且是预配置的，可以输出生产环境的优化过的静态资源")])])])]),t._v(" "),e("h2",{attrs:{id:"三、vite的功能及使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三、vite的功能及使用"}},[t._v("#")]),t._v(" 三、vite的功能及使用")]),t._v(" "),e("h3",{attrs:{id:"_3-1vite解决了什么"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1vite解决了什么"}},[t._v("#")]),t._v(" 3.1vite解决了什么？")]),t._v(" "),e("ul",[e("li",[t._v("识别某些浏览器无法识别的文件，如.ts，.vue，帮助把一些.ts，.vue转换成ES模块化")]),t._v(" "),e("li",[t._v("如果包之间的依赖过多，会发送一些不必要的网络请求，比如使用lodash，vite来解决")]),t._v(" "),e("li",[t._v("会对依赖做一些预打包的操作放在module中的.vite文件夹中，比如预打包vue，lodash，下一次跑的时候就可以节省这个时间了")])]),t._v(" "),e("p",[e("strong",[t._v("预打包")])]),t._v(" "),e("ul",[e("li",[t._v("对于某些不涉及编辑操作的第三方库：如vue源代码，lodash源代码，都会进行预打包的操作，这样下次就可以节省打包的时间了")])]),t._v(" "),e("h3",{attrs:{id:"_3-2vite的使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-2vite的使用"}},[t._v("#")]),t._v(" 3.2vite的使用")]),t._v(" "),e("p",[t._v("全局安装："),e("code",[t._v("npm i vite -g")])]),t._v(" "),e("p",[t._v("局部安装："),e("code",[t._v("npm i vite -D")])]),t._v(" "),e("p",[t._v("使用："),e("code",[t._v("npx vite")])]),t._v(" "),e("ul",[e("li",[t._v("发现服务秒开，可以支持ts和vue了，导入文件可以不写后缀名了")]),t._v(" "),e("li",[t._v("使用lodash发现不会同时请求几百个文件了")]),t._v(" "),e("li",[t._v("使用css也发现不需要再去配什么loader了，直接导入在main.js文件上就可以使用")])]),t._v(" "),e("p",[t._v("注意：")]),t._v(" "),e("ul",[e("li",[t._v("但是这个时候去使用less就直接报错了，会问我们是否安装了less？这个时候也很方便，直接"),e("code",[t._v("npm i less -D")]),t._v("即可")]),t._v(" "),e("li",[t._v("浏览器前缀也是需要安装(注意postcss也有依赖，可以选择autofixer或者postcss-preset-env)："),e("code",[t._v("npm i postcss -D")]),t._v("和"),e("code",[t._v("npm i postcss-preset-env")]),t._v("，同时还需要配置postcss.config.js")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// postcss.config.js配置")]),t._v("\nmodule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  plugin"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"postcss-preset-env`"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h2",{attrs:{id:"四、vite的原理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四、vite的原理"}},[t._v("#")]),t._v(" 四、Vite的原理")]),t._v(" "),e("ol",[e("li",[t._v("首先会建立一个本地的服务器（webpack是express，vite1是koa，vite2用的是Connect）")]),t._v(" "),e("li",[t._v("浏览器请求我们用到的文件，比如math.ts。")]),t._v(" "),e("li",[t._v("但是这个请求会被Connect拦截，但返回的并不是我们直接在项目中编写的ts或者less文件。")]),t._v(" "),e("li",[t._v("而是返回我们编写的文件经过vite转换的es6js代码的文件（less文件也会被转成js）")])]),t._v(" "),e("p",[e("img",{attrs:{src:v(493),alt:""}})]),t._v(" "),e("p",[t._v("观察对比vite转换前后的文件")]),t._v(" "),e("p",[e("img",{staticStyle:{zoom:"50%"},attrs:{src:v(494)}}),e("img",{staticStyle:{zoom:"50%"},attrs:{src:v(495)}})]),t._v(" "),e("h2",{attrs:{id:"五、对vue-的支持"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#五、对vue-的支持"}},[t._v("#")]),t._v(" 五、对vue 的支持")]),t._v(" "),e("ul",[e("li",[t._v("vite对vue提供第一优先支持：\n"),e("ul",[e("li",[t._v("vue3单文件组件支持："),e("code",[t._v("@vitejs/plugin-vue")])]),t._v(" "),e("li",[t._v("vue3JSX支持："),e("code",[t._v("@vitejs/plugin-vue-jsx")])]),t._v(" "),e("li",[t._v("Vue2支持："),e("code",[t._v("underfin/vite-plugin-vue2")])])])]),t._v(" "),e("li",[t._v("主要还需要编译.vue文件的插件："),e("code",[t._v("npm i @vue/compiler-sfc")])]),t._v(" "),e("li",[t._v("Vue插件就必须要配置了")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" vue "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@vitejs/plugin-vue'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmodule"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  plugin"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("vue")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h2",{attrs:{id:"六、vite打包成dist"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#六、vite打包成dist"}},[t._v("#")]),t._v(" 六、Vite打包成dist")]),t._v(" "),e("ul",[e("li",[t._v("打包："),e("code",[t._v("npx vite build")])]),t._v(" "),e("li",[t._v("预览："),e("code",[t._v("npx vite preview")])])]),t._v(" "),e("h2",{attrs:{id:"七、为什么这么快"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#七、为什么这么快"}},[t._v("#")]),t._v(" 七、为什么这么快")]),t._v(" "),e("ul",[e("li",[t._v("使用了ESBuild，其特点：\n"),e("ul",[e("li",[t._v("超快的构建速度，并且不需要缓存（babel需要）")]),t._v(" "),e("li",[t._v("支持ES6和CommonJS模块化")]),t._v(" "),e("li",[t._v("支持ES6的TRee Shaking")]),t._v(" "),e("li",[t._v("支持Go、JavaScript的Api")]),t._v(" "),e("li",[t._v("支持TS，JSX等语法编译")]),t._v(" "),e("li",[t._v("支持source-map")]),t._v(" "),e("li",[t._v("支持代码压缩")]),t._v(" "),e("li",[t._v("支持扩展其他插件")])])])]),t._v(" "),e("p",[e("strong",[t._v("ESbuild为啥这么快？")])]),t._v(" "),e("ul",[e("li",[t._v("使用go语言编写的，可以直接转换成机器代码，无需经过字节码")]),t._v(" "),e("li",[t._v("ESBuild可以充分利用CPU的多内核，尽可能让他们饱和运行，会开启很多个进程")]),t._v(" "),e("li",[t._v("ESBuild所有内容都是从0编写的，而不是使用第三方的东西")])]),t._v(" "),e("h2",{attrs:{id:"八、vite的脚手架"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#八、vite的脚手架"}},[t._v("#")]),t._v(" 八、Vite的脚手架")]),t._v(" "),e("p",[t._v("安装："),e("code",[t._v("npm i @vitejs/create-app -g")])])])}),[],!1,null,null,null);s.default=a.exports}}]);